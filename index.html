<html manifest="./resource/app.manifest">
  <head>
    <meta charset="utf-8">
    <meta name="author" content="Irakli Gozalishvili">
    <title>Ambiance</title>
    <link rel=stylesheet href=./resource/codemirror.css>
    <link rel=stylesheet href=./resource/ambiance.css>
    <link rel=stylesheet href=./resource/gcli.css>
    <script src=./resource/codemirror-compressed.js></script>
    <script src=./resource/gcli.js></script>
    <style>
      html, body {
        font-size: 12px;
        margin: 0;
        padding: 0;
        top: 0;
        left: 0;
        width: 100%;
        min-width: 100%;
        height: 100%;
        min-height: 100%;
        color: #E6E1DC;
        overflow: hidden;
      }

      .CodeMirror .CodeMirror-scroll {
        height: 100%;
      }
    </style>
  </head>
  <body class=ambiance>
    <div id=input name=input></div>
    <div id=gcli-display></div>
    <input id=gcli-input class=gcli-input type=text autofocus/>
    <script>
      var input = CodeMirror(document.getElementById("input"), {
        lineNumbers: true,
        autoClearEmptyLines: true,
        tabSize: 2,
        indentWithTabs: false,
        electricChars: true,
        autoClearEmptyLines: true,
        mode: "clojure",
        theme: "ambiance",
        autofocus: true,
        fixedGutter: true,
        matchBrackets: true,
        onFocus: function() {
          document.getElementById('gcli-display').hidden = true
        },
        onBlur: function() {
          document.getElementById('gcli-display').hidden = false
        },
        onCursorActivity: function() {
          input.setLineClass(hlLine, null, null);
          hlLine = input.setLineClass(input.getCursor().line, null, "activeline");
        },
        onGutterClick: function() {
          var output = document.getElementById("output")
          var input = document.getElementById("input")
          output.hidden = !output.hidden
          input.style.width = output.hidden ? '100%' : '50%'
        }
      });
      var hlLine = input.setLineClass(0, "activeline");
      require([ 'gcli/index', 'demo/index' ], function(gcli, focus) {
        gcli.createDisplay();
      });
    </script>
  </body>
</html>
